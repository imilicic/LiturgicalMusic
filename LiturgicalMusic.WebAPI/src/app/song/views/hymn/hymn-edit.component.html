<form autocomplete="off" [formGroup]="voiceForm" (ngSubmit)="createUpdateSong(voiceForm.value)" novalidate>
    <div class="form-group" [ngClass]="{'has-error': key.touched && key.invalid, 'has-success': key.value!=null && key.valid}">
        <label class="control-label" for="Key">Tonalitet</label>
        <select class="form-control" formControlName="Key" id="Key">
            <option value="ces \major">Ces dur</option>
            <option value="c \major">C dur</option>
            <option value="cis \major">Cis dur</option>
            <option value="des \major">Des dur</option>
            <option value="d \major">D dur</option>
            <option value="es \major">Es dur</option>
            <option value="e \major">E dur</option>
            <option value="f \major">F dur</option>
            <option value="fis \major">Fis dur</option>
            <option value="ges \major">Ges dur</option>
            <option value="g \major">G dur</option>
            <option value="aes \major">As dur</option>
            <option value="a \major">A dur</option>
            <option value="bes \major">B dur</option>
            <option value="b \major">H dur</option>
            <option value="c \minor">c mol</option>
            <option value="cis \minor">cis mol</option>
            <option value="d \minor">d mol</option>
            <option value="dis \minor">dis mol</option>
            <option value="es \minor">es mol</option>
            <option value="e \minor">e mol</option>
            <option value="f \minor">f mol</option>
            <option value="fis \minor">fis mol</option>
            <option value="g \minor">g mol</option>
            <option value="gis \minor">gis mol</option>
            <option value="a \minor">a mol</option>
            <option value="bes \minor">b mol</option>
            <option value="b \minor">h mol</option>
        </select>
        <span class="help-block" *ngIf="key.touched && key.invalid">Obavezno!</span>
    </div>
    <div class="form-group" [ngClass]="{'has-error': (timeNumerator.touched && timeNumerator.invalid) || (timeDenominator.touched && timeDenominator.invalid), 'has-success': (timeNumerator.value!=null && timeNumerator.valid && timeDenominator.value!=null && timeDenominator.valid)}">
        <label class="control-label">Mjera</label>
        <select class="form-control" formControlName="timeNumerator">
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>/
        <select class="form-control" formControlName="timeDenominator">
            <option value="2">2</option>
            <option value="4">4</option>
            <option value="8">8</option>
        </select>
        <span class="help-block" *ngIf="(timeNumerator.touched && timeNumerator.invalid) || (timeDenominator.touched && timeDenominator.invalid)">Obavezno!</span>
    </div>
    <h2>Predigra</h2>
    <instrument-voices [templateVoices]="partsTemplateVoices[0]" [code]="getInstrumentalPartCode('Prelude')"></instrument-voices>
    <h2>Glas</h2>
    <instrument-voices [templateVoices]="getTemplateVoices('Voice')" [code]="getSongCode()"></instrument-voices>
    <h2>Orgulje</h2>
    <instrument-voices [templateVoices]="getTemplateVoices('Organ')" [code]="getSongCode()"></instrument-voices>
    <h2>Tekst</h2>
    <div>
        <div class="form-group" *ngFor="let stanza of lyrics; let i = index" [ngClass]="{'has-error': hasError(stanza.controlName), 'has-success': hasSuccess(stanza.controlName)}">
            <label class="control-label" for="{{stanza.controlName}}">{{i + 1}}. strofa</label>
            <textarea rows="5" cols="10" class="form-control" id="{{stanza.controlName}}" formControlName="{{stanza.controlName}}"></textarea>
            <span class="help-block" *ngIf="hasError(stanza.controlName)">Obavezno!</span>
        </div>
        <button type="button" class="btn btn-default" (click)="appendStanza()">
            <span class="glyphicon glyphicon-plus"></span> Dodaj
        </button>
        <button type="button" class="btn btn-default" (click)="deleteStanza()">
            <span class="glyphicon glyphicon-minus"></span> Obriši zadnju
        </button>
    </div>
    <h2>Međuigra</h2>
    <instrument-voices [templateVoices]="partsTemplateVoices[1]" [code]="getInstrumentalPartCode('Interlude')"></instrument-voices>
    <h2>Završetak</h2>
    <instrument-voices [templateVoices]="partsTemplateVoices[2]" [code]="getInstrumentalPartCode('Coda')"></instrument-voices>
    <div *ngIf="preview" style="text-align:center;">
        <embed [src]="domSanitizer.bypassSecurityTrustResourceUrl(pdfFileName)" width="800" height="500" *ngIf="preview && !spinner"/>
    </div>
    <button type="button" class="btn btn-default" (click)="previewSong(voiceForm.value)" [disabled]="previewEnabled() || spinner">Pregledaj</button>
    <button type="submit" class="btn btn-default" [disabled]="voiceForm.invalid || spinner || voicesInvalid()">Spremi</button>
    <img src="app/assets/image/spinner.gif" style="width:100px;" *ngIf="spinner"/>
</form>